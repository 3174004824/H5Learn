<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <style type="text/css">
        h1{color: #3e8f3e;text-decoration: underline}
        h2{color: #3e8f3e;text-decoration: underline}
        h3{color: #4cae4c;text-decoration: underline}
        h4{color: #5FB878;text-decoration: underline}
    </style>
</head>

<body>
<h1>5.2dataTransfer对象</h1>
<p>5.2.1dataTransfer对象属性</p>
<p>1.dropEffect:该属性设置拖放操作使用的实际行为，允许的值为以下四个</p>
<p>copy：被拖动对象拷贝到目标元素</p>
<p>move：被动对象移动到目标元素</p>
<p>link:目标元素建立一个被拖动对象的链接</p>
<p>none：不允许放到目标位置</p>
<p>2.effectAllowed:该属性设置允许发生的拖放行为，可设置的值为以下几种</p>
<p>copy：被拖动对象拷贝到目标元素， dropEffect 应设置为“copy”</p>
<p>move：被拖动对象移动到目标元素， dropEffeet 应设置为“move“</p>
<p>link:目标元素建立一个被拖动对象的链接, dropEffect 应设置为“link”</p>
<p>copyLink:拷贝对象或建立对象链接, dropEffect 应设置为“copy”或“link”</p>
<p>copyMove：拷贝或移动对象， dropEffect 应设置为“copy”或“move”</p>
<p>linkMove:移动对象或建立对象链接, dropEffect 应设置为“move”或“link”</p>
<p>all：允许所有的拖放行为</p>
<p>none：不允许任何拖放行为</p>
<p>uninitialized ： effeetAllowed 的默认值，执行行为等同于all</p>

<p>3.types</p>
<p>该属性返回一个List对象，包含所有存储到 dataTransfer 的数据类型。不同浏览器支持的数据类型不同，IE限制最严格，Chrome和Firefox可以用任意字符串作为一种类型。</p>
<p>4.files</p>
<p>该属性返回一个List对象。从本地硬盘拖曳文件到浏览器中时，通过该属性可获取文件列表，此时types属性为files。</p>

<p>5.2.2dataTransfer对象方法</p>
<P>1.setData(format,data)</P>
<p>该方法将指定格式的数据存储在dataTransfer对象中。参数format定义数据类型，data定义需要存储的数据。</p>
<p>2.getData(format)</p>
<p>该方法从 dataTransfer 对象中获取指定格式的数据。参数format定义要读取数据的数据类型，如果指定的数据类型不存在，则返回空字符串或报错。</p>
<p>3.clearData</p>
<p>该方法从 dataTransfer 对象中删除指定格式的数据。参数format可选，如果未指定格式，则删除对象中所有数据。</p>
<p>4.setDraglmage(element,x,y)</p>
<p>该方法设置拖放操作时跟随的图片。参数element定义图片，x设置图片与鼠标在水平方向上的距离，y设置图片与鼠标在垂直方向上的距离。默认情况下，被拖动对象转换为一张透明图片跟随鼠标移动。</p>
<p>5.2.3使用dataTransfer对象</p>
<p>在拖动“待删除文件”到“回收站”的过程中，依次执行如下事件：</p>
<p>dragStart：将 dataTransfer 的属性 effectAllowed 设置为“copy”，利用 dataTransfer 的setData方法，将“待删除文件”的id值作为text类型数据存入 dataTransfer 对象，状态元素显示为“开始拖动”。</p>
<p>drag：状态元素显示为“拖动中!”。由于drag事件在dragStart事件后马上执行，所以状态元素显示为“开始拖动”的时间非常短，无法从状态元素上看到“开始拖动”的文字。drag事件在拖动过程中会反复执行。</p>
<p>dragEnter：当拖动“待删除文件”进入“回收站”时执行，状态元素显示为“进入目标区域”。</p>
<p>dragOver：当拖动“待删除文件”在“回收站”内移动时执行，将状态元素显示为“在目标区域移动”。设置 dataTransfer 的 dropEffect 属性为“copy”，与dragStart中的effect Allowed相对应。该事件在dragEnter事件后立即执行，会覆盖dragEnter的状态显示。dragOver在目标元素内拖动鼠标时反复执行。</p>
<p>dragLeave:当将“待删除文件”移出“回收站”时执行，将状态元素显示为“离开目标区域”。</p>
<p>drop：当将“待删除文件”放到“回收站”时执行，利用 dataTransfer 的getData方法获取text类型的数据，在这个例子中是“待删除文件”的id属性值，通过 getElementById 方法获得“待删除文件”元素，并追加到“回收站”中，状态元素显示为“放下对象”。</p>
<p>dragEnd：拖动结束时执行，状态元素显示为“拖放结束”，在drop事件之后马上执行。</p>


</body>
</html>